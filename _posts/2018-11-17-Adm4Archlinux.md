---
layout: post_layout
title: Linux下Firefox广告过滤之Adm「已弃用」
time: 2018年11月17日 星期六
location: 中国
pulished: true
excerpt_separator: "<!--more-->"
---



Adbyby用了段时间总体还是很不错的，后台运行稳定，内存占用就3M多，广告过滤效果也还可以，但我决定换掉用[Adm-阿呆喵](http://doc.admflt.com/)。

Adbyby有个极大的缺点：linux平台下无法过滤https广告。

win平台的3.x已经支持https过滤，linux平台还停留在2.x，好像开发也不活跃，不知道哪里找作者反馈。https过滤如果放在路由上是有很大争议的，毕竟有风险。可是现在很多广告都是https的，不支持漏网之鱼挺碍眼的。

跟Adbyby不同，Adm是主pc平台的，主要是win，linux平台没有界面，设置依靠配置文件，也只有主要的几个基本功能。Adm的文档很丰富，按照文档来就行了。

官网提供下载的启动和停止脚本不要用，运行后内存瞬间爆满。iptables命令跟adbyby一样还是没效果，不过类似adbyby可以当作代理主机转发过去。
<!--more-->
----------------------------------------------

---------更新 2019-3-16----------

无意中结束openbox桌面回到tty下再进入X，内存暴涨机子卡住不动，过一会儿自动回复正常水平。测试下发现是退出桌面adm未结束，重启桌面重复运行adm导致的。找了段脚本检测adm运行状态再启动解决了。

```bash
# !/bin/bash
running=`ps ax | grep -v grep | grep -e '\sadm$' | wc -l`
if [ $running -gt 0 ]; then
    echo "Adm is running"
else
    adm
fi
```

--------------------------------------

每次运行后会自动更新规则，默认规则效果就很不错了。https过滤采用黑名单制，先添加域名进去才能生效。

内存占用是adbyby的十倍，其实就是3M和30多M的区别。

支持全局代理和智能代理，不过我试了下ssr不行，提示说不是http数据。

对比adbyby的内存消耗极致优化，adm也是很优秀的，而且有维护更新，功能完善不至于有瘸腿走路的感觉。

-----------------更新 2020-06-04--------------------

Adm在linux下版本号到了2.6，不过这个版本容易崩溃自动退出，目前发现访问淘宝时容易触发这个bug。后来下了旧版2.5没有崩溃的毛病，但是内存会不断增长，这个bug2.6也有。刚打开时30M，然后使用过程中不断增长，上回长时间未关机重启结果增长到了300多M，未见停止趋势。